# API Proxy Tool - 产品需求文档

## 文档信息

| 项目     | 内容                |
| -------- | ------------------- |
| 产品名称 | API Proxy Tool      |
| 文档版本 | v2.0                |
| 文档类型 | 产品需求文档（PRD） |
| 编写日期 | 2025年              |
| 目标用户 | 前端开发工程师      |

---

## 一、产品概述

### 1.1 产品定位

API Proxy Tool 是一款面向前端开发者的浏览器扩展工具，旨在解决前端开发过程中 API 接口调试和 Mock 数据管理的痛点。通过简单易用的配置界面，帮助开发者在不修改业务代码的情况下，快速切换不同的数据源，提升开发效率和调试体验。

### 1.2 目标用户

**主要用户群体**：

- 前端开发工程师
- 全栈开发工程师
- 测试工程师

**用户场景**：

- 前端开发时需要对接后端接口，但后端接口尚未开发完成
- 需要测试不同数据场景下的前端表现
- 需要快速切换开发环境和测试环境的数据源
- 需要管理多个项目的 API 配置

### 1.3 核心价值

**提升开发效率**

- 无需修改代码即可切换数据源
- 一键配置，立即生效
- 支持批量操作，减少重复劳动

**降低学习成本**

- 直观的可视化配置界面
- 清晰的操作流程和反馈
- 完善的帮助提示

**增强协作能力**

- 支持配置导入导出，方便团队共享
- 支持从 API 文档平台同步接口配置
- 支持权限点生成，便于与后端对接

### 1.4 产品目标

**短期目标**（当前版本）

- 提供稳定可靠的 API 代理功能
- 支持基本的接口管理功能
- 提供友好的用户界面

**长期目标**（未来版本）

- 支持更多 API 文档平台集成
- 支持团队协作和配置共享
- 支持接口性能监控和分析
- 支持更多 Mock 数据生成规则

---

## 二、功能需求

### 2.1 核心功能：API 请求代理

#### 2.1.1 功能描述

产品能够自动拦截浏览器中页面发起的 API 请求，并根据用户配置的规则，将请求重定向到指定的 Mock 服务器，或者直接返回自定义的响应数据。

#### 2.1.2 用户价值

- **开发效率提升**：无需等待后端接口完成，即可开始前端开发
- **测试场景丰富**：可以快速切换不同的数据场景进行测试
- **调试体验优化**：可以模拟各种网络情况和响应状态

#### 2.1.3 功能特性

**请求拦截能力**

- 自动拦截页面中的所有 API 请求
- 支持所有常见的 HTTP 请求方法（GET、POST、PUT、DELETE、PATCH）
- 实时生效，无需刷新页面

**灵活的匹配规则**

- **包含匹配**：支持 URL 包含指定字符串的请求
- **精确匹配**：支持 URL 完全匹配的请求
- **正则匹配**：支持使用正则表达式进行复杂匹配

**多种代理方式**

- **重定向模式**：将请求重定向到指定的 Mock 服务器地址
- **直接返回模式**：直接返回用户配置的响应数据，无需外部服务器

**响应控制能力**

- 可自定义响应状态码（如 200、404、500 等）
- 可设置响应延迟时间，模拟真实网络环境
- 可自定义响应头信息

**全局开关控制**

- 提供全局总开关，一键开启或关闭所有代理功能
- 开关状态通过扩展图标直观显示
- 关闭时自动清除所有拦截规则，不影响正常浏览

#### 2.1.4 使用场景

**场景一：后端接口未完成**

- 前端开发者需要开发某个功能页面
- 后端接口还在开发中，无法提供真实数据
- 使用产品配置 Mock 数据，前端可以正常开发

**场景二：测试异常场景**

- 需要测试接口返回错误时的页面表现
- 配置不同的状态码和错误响应数据
- 快速验证错误处理逻辑

**场景三：性能测试**

- 需要测试接口响应慢时的用户体验
- 设置响应延迟时间，模拟慢网络环境
- 验证加载状态和超时处理

---

### 2.2 模块化管理

#### 2.2.1 功能描述

支持创建多个模块（Module），每个模块包含一组相关的 API 配置。模块可以对应不同的项目、不同的功能模块或不同的开发阶段，帮助用户更好地组织和管理 API 配置。

#### 2.2.2 用户价值

- **组织清晰**：将不同项目的接口分开管理，避免混乱
- **切换便捷**：可以快速在不同模块间切换
- **批量操作**：可以对整个模块进行批量开关操作

#### 2.2.3 模块属性

每个模块包含以下信息：

- **模块名称**：用户自定义的模块显示名称
- **模块标识**：模块的业务标识符，用于区分不同模块
- **API 文档地址**：关联的 API 文档链接（可选）
- **页面域名**：模块关联的页面域名（可选）
- **请求头配置**：模块级别的公共请求头（可选）
- **接口列表**：该模块下包含的所有 API 配置

#### 2.2.4 模块操作

**创建模块**

- 点击模块标签页右侧的"+"按钮
- 系统自动生成默认名称，用户可修改
- 创建后自动切换到新模块

**编辑模块**

- 点击模块标签页中的编辑图标
- 可修改模块名称和标识
- 保存后立即生效

**删除模块**

- 点击模块标签页的关闭按钮
- 系统至少保留一个模块，不允许全部删除
- 删除前需要二次确认，防止误操作
- 删除后自动切换到第一个模块

**模块切换**

- 点击模块标签页即可切换
- 切换后显示对应模块的接口列表
- 系统会记住用户最后访问的模块

**模块开关**

- 每个模块都有独立的开关控制
- 关闭模块时，该模块下所有接口的代理都会失效
- 可以快速启用或禁用整个模块的代理功能

#### 2.2.5 使用场景

**场景一：多项目管理**

- 开发者同时维护多个项目
- 为每个项目创建一个模块
- 切换项目时切换对应模块，互不干扰

**场景二：功能模块划分**

- 一个项目包含多个功能模块
- 按功能模块创建不同的模块
- 便于按模块进行开发和测试

**场景三：环境切换**

- 开发环境、测试环境、预发布环境使用不同的 Mock 数据
- 为每个环境创建一个模块
- 切换环境时切换对应模块

---

### 2.3 API 接口管理

#### 2.3.1 功能描述

提供完整的 API 接口配置和管理功能，包括添加、编辑、删除、克隆、迁移等操作，支持对每个接口进行详细的配置。

#### 2.3.2 接口配置项

**基础信息**

- **接口名称**：接口的中文名称，便于识别
- **接口地址**：原始 API 地址，支持相对路径和完整 URL
- **重定向地址**：Mock 服务器地址，请求会被重定向到这里
- **请求方法**：GET、POST、PUT、DELETE、PATCH 等

**匹配配置**

- **匹配方式**：包含匹配、精确匹配、正则匹配
- **延迟时间**：响应延迟时间（毫秒），用于模拟网络延迟

**Mock 配置**

- **Mock 方式**：重定向到 Mock 服务器，或直接返回响应数据
- **响应数据**：当使用直接返回模式时，配置的响应数据内容
- **状态码**：HTTP 响应状态码，如 200、404、500 等

**扩展信息**

- **权限点标识**：接口关联的权限点 Key，用于权限系统集成
- **页面路由**：接口所属的页面路由，便于关联页面和接口
- **请求头**：自定义请求头配置
- **请求体**：请求体配置（可选）
- **接口标签**：接口的标签列表，用于分类和筛选

#### 2.3.3 接口操作

**添加接口**

- 点击"添加"按钮打开配置表单
- 填写接口的基本信息和配置项
- 支持分组展示配置项，便于填写
- 保存后立即生效，无需刷新

**编辑接口**

- 点击表格中的"编辑"按钮
- 打开配置表单，预填充当前接口的所有配置
- 修改后保存更新
- 支持实时预览配置效果

**克隆接口**

- 点击"其他操作"下拉菜单中的"克隆"选项
- 复制当前接口的所有配置
- 生成新的接口，默认处于关闭状态
- 适用于创建相似的接口配置

**删除接口**

- 点击"其他操作"下拉菜单中的"删除"选项
- 删除前需要二次确认
- 删除后立即更新，相关代理规则也会被移除

**迁移接口**

- 点击"其他操作"下拉菜单中的"迁移"选项
- 选择目标模块
- 将接口从当前模块移动到目标模块
- 接口配置保持不变，仅改变所属模块

**测试接口**

- 点击接口方法标签旁的"测试"按钮
- 打开接口测试窗口
- 可以配置请求参数和请求头
- 发送请求并查看响应结果，验证配置是否正确

**开关控制**

- 每个接口都有独立的开关
- 可以单独控制每个接口的代理是否生效
- 支持批量操作：表格表头的开关可以控制当前模块所有接口
- 开关状态实时同步，立即生效

**复制权限点**

- 单个接口：点击表格中的"复制权限点"按钮
- 批量操作：点击"复制权限点"下拉菜单，选择"复制所有权限点"或"复制勾选权限点"
- 输入父级权限点 Key
- 系统自动生成权限点数据并复制到剪贴板
- 可以直接粘贴到后端权限系统使用

#### 2.3.4 使用场景

**场景一：快速添加接口**

- 从 API 文档中复制接口信息
- 在表单中填写接口地址和 Mock 地址
- 保存后立即可以使用

**场景二：批量配置相似接口**

- 先配置一个接口
- 使用克隆功能快速创建相似接口
- 只需修改少量配置项即可

**场景三：接口测试**

- 配置完接口后，使用测试功能验证配置
- 查看响应结果，确认 Mock 数据是否正确
- 调整配置直到满足需求

**场景四：权限点生成**

- 配置完接口后，批量生成权限点
- 复制权限点数据给后端开发
- 提高前后端协作效率

---

### 2.4 Apifox 平台同步

#### 2.4.1 功能描述

支持从 Apifox 平台同步接口配置，自动将 Apifox 中的接口信息转换为产品可用的配置，支持基于标签（Tag）和接口状态进行筛选，大幅减少手动配置的工作量。

#### 2.4.2 用户价值

- **减少重复劳动**：无需手动逐个添加接口配置
- **保持同步**：接口更新后可以快速同步到产品中
- **提高准确性**：避免手动输入错误

#### 2.4.3 同步配置

**Apifox 地址配置**

- 输入 Apifox 导出的 OpenAPI 格式文档地址
- 系统自动验证地址是否可访问
- 自动解析文档内容，提取接口信息
- 保存最近使用的地址，方便下次使用

**Mock 地址前缀**

- 配置 Mock 服务器的地址前缀
- 系统会自动为每个接口生成完整的 Mock 地址
- 支持自定义配置，适应不同的 Mock 服务器

**标签筛选**

- 显示 Apifox 文档中的所有标签
- 支持多选，可以选择要同步的标签
- 保存标签选择历史，支持快速选择常用标签组合
- 检测标签冲突，提示用户选择处理方式

**状态筛选**

- 支持按接口状态筛选：
  - 开发中：正在开发的接口
  - 已发布：已发布的接口
  - 测试中：正在测试的接口
  - 已废弃：已废弃的接口
  - 已弃用：已弃用的接口
- 默认选择所有状态

**合并策略**

- **合并模式**：保留现有模块，追加新同步的模块
- **替换模式**：替换所有从 Apifox 同步的模块
- 当检测到冲突时，用户需要选择合并策略

#### 2.4.4 同步流程

1. **配置 Apifox 地址**
   - 用户输入 Apifox 文档地址
   - 系统自动验证并解析文档
   - 提取可用的标签列表

2. **选择同步范围**
   - 用户选择要同步的标签（可选）
   - 用户选择接口状态（可选）
   - 用户配置 Mock 地址前缀

3. **预览同步结果**
   - 显示将要同步的接口数量
   - 显示接口摘要信息
   - 检测是否有冲突或变化

4. **执行同步**
   - 系统自动将接口信息转换为模块配置
   - 根据接口分组自动创建模块
   - 自动生成权限点标识
   - 保存配置并生效

#### 2.4.5 智能同步

**变化检测**

- 对比现有配置和新同步的配置
- 检测新增、删除、修改的接口
- 以表格形式展示变化摘要
- 用户确认后再执行同步

**冲突处理**

- 检测模块名称是否冲突
- 检测接口地址是否冲突
- 提示用户选择处理方式
- 支持覆盖或跳过冲突项

**迭代信息管理**

- 支持配置迭代相关的文档链接
  - 需求文档链接
  - 技术文档链接
  - 原型文档链接
- 按标签分组展示迭代信息
- 在模块信息栏中显示相关文档链接
- 方便开发团队查看相关文档

#### 2.4.6 使用场景

**场景一：新项目初始化**

- 后端在 Apifox 中维护接口文档
- 前端使用同步功能快速导入所有接口
- 自动生成模块和接口配置
- 大幅减少配置时间

**场景二：接口更新同步**

- Apifox 中的接口有更新
- 使用同步功能检测变化
- 查看变化摘要，确认更新内容
- 一键同步更新

**场景三：按标签同步**

- 只需要同步特定功能的接口
- 选择对应的标签进行同步
- 只同步需要的接口，保持配置简洁

---

### 2.5 权限点管理

#### 2.5.1 功能描述

根据接口配置自动生成权限点数据，用于与后端权限系统集成。支持单个接口、模块级别和全局级别的权限点生成和复制。

#### 2.5.2 用户价值

- **提高协作效率**：快速生成权限点数据，减少前后端沟通成本
- **减少错误**：自动生成，避免手动输入错误
- **标准化**：统一的权限点格式，便于后端处理

#### 2.5.3 权限点数据结构

每个权限点包含以下信息：

- **父级权限点 Key**：权限点的父节点标识（用户输入）
- **权限点 API URL**：从接口 URL 中提取的路径
- **权限点 Key**：权限点的唯一标识（自动生成）
- **权限点名称**：权限点的显示名称（使用接口名称）
- **类型**：固定为"权限点"
- **其他字段**：优先级、描述、菜单路径等（可选）

#### 2.5.4 权限点生成规则

**API URL 提取规则**

- 从接口的完整 URL 中提取路径部分
- 自动识别版本号（如 /v1、/v2），从版本号之后开始截取
- 示例：`/api/saas/v1/demo/user/queryList` → `/demo/user/queryList`

**权限点 Key 生成规则**

- 格式：模块名 + 接口路径最后一段
- 使用统一的命名规范
- 示例：`demoUserManagement-queryList`

**权限点名称**

- 直接使用接口的中文名称

**父级权限点 Key**

- 由用户手动输入
- 用于标识权限点的层级关系

#### 2.5.5 权限点操作

**单个接口复制**

- 点击表格中"权限点"列的复制按钮
- 弹出输入框，输入父级权限点 Key
- 系统生成权限点数据
- 自动复制到剪贴板，可直接粘贴使用

**批量复制（模块级别）**

- 点击"复制权限点"下拉按钮
- 选择"复制所有权限点"或"复制勾选权限点"
- 弹出输入框，输入父级权限点 Key
- 系统生成权限点数据数组
- 自动复制到剪贴板

**全局复制**

- 点击顶部导航栏的"复制所有权限点"按钮
- 弹出输入框，输入父级权限点 Key
- 系统生成所有模块的权限点数据
- 自动复制到剪贴板

#### 2.5.6 使用场景

**场景一：新功能开发**

- 前端开发完接口配置后
- 批量生成权限点数据
- 复制给后端开发，用于权限系统配置
- 提高前后端协作效率

**场景二：权限点更新**

- 接口有新增或修改
- 重新生成权限点数据
- 更新后端权限配置

---

### 2.6 快速联调功能

#### 2.6.1 功能描述

支持快速切换不同的 Mock 响应数据，无需修改接口配置即可测试不同场景。可以预设多个响应模板，快速切换使用。

#### 2.6.2 用户价值

- **快速测试**：无需修改配置即可切换不同响应数据
- **场景丰富**：可以预设多个测试场景
- **提高效率**：减少重复配置工作

#### 2.6.3 快速联调类型

**无**

- 不使用快速联调功能
- 使用正常的代理配置

**预设响应**

- 使用全局配置的响应模板
- 在"快速联调设置"中管理模板
- 接口配置中关联模板
- 启用后使用模板的响应数据

**自定义响应**

- 接口级别的自定义响应列表
- 支持配置多个响应场景
- 可以切换激活的响应场景
- 适用于需要测试多种数据场景的接口

#### 2.6.4 快速联调设置

**模板管理**

- 添加、编辑、删除响应模板
- 模板包含名称、标识、响应数据
- 模板可以在多个接口中复用
- 统一管理，便于维护

**接口配置**

- 在接口编辑表单中配置快速联调
- 选择快速联调类型
- 关联预设模板或配置自定义响应
- 可以随时启用或禁用

#### 2.6.5 使用场景

**场景一：测试不同数据场景**

- 配置多个响应模板（成功、失败、空数据等）
- 在接口中快速切换使用
- 验证不同场景下的页面表现

**场景二：A/B 测试**

- 配置不同的响应数据
- 快速切换测试不同方案
- 对比不同方案的效果

---

### 2.7 配置导入导出

#### 2.7.1 功能描述

支持将配置导出为文件，也支持从文件导入配置。方便用户备份配置、在不同设备间同步配置，或在团队成员间共享配置。

#### 2.7.2 用户价值

- **数据备份**：定期导出配置，防止数据丢失
- **设备同步**：在不同设备间同步配置
- **团队协作**：团队成员可以共享配置，统一开发环境

#### 2.7.3 导出功能

**导出格式**

- JSON 格式文件
- 文件名包含日期，便于识别
- 包含所有模块和接口配置

**导出内容**

- 所有模块的配置信息
- 所有接口的配置信息
- 保持配置的完整性和一致性

**导出操作**

- 点击顶部导航栏的"导出"按钮
- 系统自动生成文件并下载
- 文件可以直接用于导入

#### 2.7.4 导入功能

**导入格式**

- 支持 JSON 格式文件
- 需要符合产品规定的格式规范

**导入模式**

- **替换模式**：清空现有配置，使用导入的配置
- **追加模式**：保留现有配置，追加导入的配置
- 系统智能判断：如果只有默认模块，自动使用替换模式

**冲突检测**

- 检测模块名称是否重复
- 检测接口地址是否重复
- 显示冲突警告信息
- 用户可以选择是否继续导入

**导入流程**

1. 点击"导入"按钮
2. 选择要导入的 JSON 文件
3. 系统解析并验证文件格式
4. 检测是否有冲突
5. 如有冲突，提示用户选择处理方式
6. 选择导入模式（如有非默认模块）
7. 执行导入
8. 显示导入结果

#### 2.7.5 使用场景

**场景一：配置备份**

- 定期导出配置作为备份
- 防止因误操作或系统问题导致配置丢失
- 需要时可以快速恢复

**场景二：团队共享**

- 团队负责人配置好开发环境
- 导出配置文件
- 团队成员导入配置，统一开发环境

**场景三：设备同步**

- 在办公室电脑配置好环境
- 导出配置文件
- 在家用电脑导入配置，继续工作

---

### 2.8 搜索与筛选

#### 2.8.1 全局搜索

**功能描述**
提供全局搜索功能，可以跨模块搜索所有接口，快速定位目标接口。

**搜索范围**

- 接口名称
- 接口地址
- Mock 地址
- 模块名称

**搜索方式**

- 实时搜索：输入关键词即时显示结果
- 不区分大小写
- 支持部分匹配
- 跨模块搜索

**搜索结果展示**

- 显示接口名称（突出显示）
- 显示接口地址（辅助信息）
- 显示所属模块（便于识别）
- 支持键盘导航选择

**搜索交互**

- 点击搜索结果后：
  1. 自动切换到接口所属的模块
  2. 清空搜索关键词
  3. 高亮显示目标接口（3 秒后自动清除）
  4. 自动滚动到目标接口位置
  5. 如果接口不在当前页，自动跳转到对应页码

#### 2.8.2 模块内搜索

**功能描述**
在当前模块内搜索接口，实时过滤表格数据。

**搜索范围**

- 接口名称
- 接口地址
- Mock 地址
- 页面路由

**搜索方式**

- 实时过滤表格数据
- 不区分大小写
- 支持部分匹配

**搜索状态**

- 搜索关键词会保存
- 切换模块后保持搜索状态
- 方便用户在不同模块间切换时保持搜索

#### 2.8.3 接口高亮

**功能描述**
搜索后自动高亮显示目标接口，帮助用户快速定位。

**高亮效果**

- 目标接口行背景色变为黄色
- 平滑的过渡动画
- 自动滚动到目标位置
- 3 秒后自动清除高亮

**高亮逻辑**

- 检测目标接口是否在当前列表中
- 如果不在当前页，自动计算并跳转到对应页码
- 延迟执行滚动，确保页面已渲染完成

#### 2.8.4 使用场景

**场景一：快速定位接口**

- 在大量接口中查找特定接口
- 使用全局搜索快速定位
- 自动跳转并高亮显示

**场景二：按关键词筛选**

- 需要查看包含特定关键词的所有接口
- 使用模块内搜索实时过滤
- 快速找到相关接口

---

### 2.9 接口测试

#### 2.9.1 功能描述

在配置页面直接测试接口，验证代理配置是否正确，无需切换到实际页面进行测试。

#### 2.9.2 测试功能

- 点击接口方法标签旁的"测试"按钮
- 打开接口测试窗口
- 可以配置请求参数
- 可以配置请求头
- 发送请求
- 显示响应结果、状态码、响应时间

#### 2.9.3 使用场景

**场景一：验证配置**

- 配置完接口后，立即测试
- 查看响应结果，确认配置是否正确
- 如有问题，及时调整

**场景二：调试问题**

- 发现代理不生效时，使用测试功能排查
- 查看请求和响应详情
- 定位问题原因

---

### 2.10 模块重置

#### 2.10.1 模块重置

**功能描述**
清空当前模块的所有接口配置，恢复到空模块状态。

**操作流程**

- 点击"重置模块"按钮
- 系统提示确认
- 确认后清空当前模块的所有接口
- 模块本身保留

**使用场景**

- 模块配置错误，需要重新配置
- 测试完成后，清理测试数据
- 模块重构，需要清空重新开始

#### 2.10.2 全局重置

**功能描述**
清空所有模块和接口配置，恢复到初始状态。

**操作流程**

- 点击顶部导航栏的"重置"按钮
- 系统提示确认，防止误操作
- 确认后清空所有配置
- 恢复默认模块

**使用场景**

- 需要完全重新开始配置
- 清理所有测试数据
- 重置到初始状态

---

## 三、用户界面需求

### 3.1 整体布局

#### 3.1.1 页面结构

**顶部导航栏**

- 高度固定，深色背景
- 左侧：全局搜索框（宽度适中，支持自动补全）
- 右侧：功能按钮组（全局开关、同步 Apifox、导入、导出、复制所有权限点、重置等）

**模块标签页区域**

- 显示所有模块标签
- 支持添加、编辑、删除模块
- 当前激活的模块高亮显示
- 支持标签页滚动（模块较多时）

**模块信息栏**（可选显示）

- 显示当前模块的接口标签
- 显示迭代信息（需求文档、技术文档、原型文档链接）
- 仅在有相关信息时显示
- 使用信息提示样式

**操作按钮栏**

- 右对齐布局
- 包含：添加接口、复制权限点（下拉菜单）、重置模块
- 按钮间距合理，视觉清晰

**主要内容区域**

- API 配置表格
- 支持分页显示
- 支持横向滚动（列较多时）
- 表格高度自适应

**页脚**

- 浅色背景
- 显示产品信息、版本号、作者链接
- 居中对齐

#### 3.1.2 响应式设计

- 支持不同屏幕尺寸
- 表格支持横向滚动
- 内容区域高度自适应
- 在小屏幕上保持良好的可用性

### 3.2 交互设计

#### 3.2.1 操作反馈

**成功操作**

- 显示成功提示消息
- 提示信息清晰明确
- 自动消失，不干扰用户

**失败操作**

- 显示错误提示消息
- 说明失败原因
- 提供解决建议（如适用）

**警告操作**

- 显示警告提示消息
- 提醒用户注意
- 需要用户确认的操作使用确认对话框

**确认操作**

- 重要操作（删除、重置等）需要二次确认
- 确认对话框说明操作后果
- 提供明确的确认和取消按钮

#### 3.2.2 状态指示

**全局开关状态**

- 通过扩展图标区分（启用/禁用）
- 图标状态清晰明显

**接口开关状态**

- 表格中使用开关组件
- 开关状态一目了然
- 支持快速切换

**模块开关状态**

- 在模块信息栏中显示
- 状态清晰明确

**高亮显示**

- 搜索后自动高亮目标接口
- 高亮效果明显但不刺眼
- 自动清除，不影响后续操作

#### 3.2.3 快捷操作

**复制功能**

- 支持一键复制接口地址、Mock 地址、权限点
- 复制后显示成功提示
- 提高操作效率

**跳转功能**

- 支持跳转到 Apifox Web 版查看接口详情
- 支持跳转到页面路由
- 在新标签页打开，不影响当前工作

**批量操作**

- 支持批量开关接口
- 支持批量复制权限点
- 提高操作效率

### 3.3 视觉设计

#### 3.3.1 设计原则

**简洁明了**

- 界面简洁，信息层次清晰
- 避免不必要的装饰
- 突出重要信息

**一致性**

- 遵循统一的设计规范
- 组件样式保持一致
- 交互方式保持一致

**易用性**

- 操作流程顺畅
- 减少用户学习成本
- 提供清晰的引导

**反馈及时**

- 操作后立即给出反馈
- 状态变化及时显示
- 错误信息清晰明确

#### 3.3.2 色彩方案

**主色调**

- 使用专业的蓝色系作为主色调
- 传达专业、可靠的产品形象

**功能色**

- 成功：绿色，用于成功提示
- 警告：橙色，用于警告提示
- 错误：红色，用于错误提示
- 信息：蓝色，用于信息提示

**中性色**

- 灰色系用于文本和边框
- 层次分明，便于阅读

#### 3.3.3 组件设计

**按钮**

- 主要操作使用主色调按钮
- 次要操作使用默认样式按钮
- 危险操作使用警告色按钮
- 按钮大小适中，易于点击

**表格**

- 清晰的表头
- 斑马纹行，便于阅读
- 支持排序和筛选
- 分页显示，性能优化

**表单**

- 分组展示字段，逻辑清晰
- 必填项明确标识
- 提供帮助提示
- 验证反馈及时

**弹窗和抽屉**

- 尺寸适中，不遮挡重要信息
- 标题清晰，说明用途
- 操作按钮位置合理
- 支持键盘操作（ESC 关闭等）

---

## 四、用户体验需求

### 4.1 易用性

**直观的操作界面**

- 功能布局合理，符合用户习惯
- 操作流程顺畅，减少学习成本
- 重要功能易于发现和使用

**清晰的操作反馈**

- 操作成功或失败都有明确提示
- 状态变化及时显示
- 错误信息清晰，便于排查问题

**完善的帮助提示**

- 关键功能提供帮助说明
- 表单字段提供填写提示
- 操作按钮提供工具提示

### 4.2 可访问性

**键盘操作支持**

- 支持键盘导航
- 支持快捷键操作
- 表单支持 Tab 键切换

**清晰的视觉反馈**

- 焦点状态清晰
- 悬停效果明显
- 状态变化有视觉提示

**合理的焦点管理**

- 弹窗打开时焦点自动定位
- 操作完成后焦点合理跳转
- 支持键盘操作流程

### 4.3 性能体验

**快速响应**

- 操作响应迅速
- 页面加载快速
- 搜索和筛选实时生效

**流畅的动画**

- 页面切换使用平滑动画
- 弹窗打开关闭有过渡效果
- 高亮显示有过渡动画

**合理的加载状态**

- 异步操作显示加载状态
- 避免用户等待焦虑
- 加载时间较长时提供进度提示

---

## 五、业务流程

### 5.1 首次使用流程

1. **安装扩展**
   - 用户从 Chrome 应用商店安装扩展
   - 扩展自动创建默认模块

2. **打开配置页面**
   - 点击扩展图标
   - 自动打开配置页面

3. **配置接口**
   - 方式一：手动添加接口
   - 方式二：从 Apifox 同步接口
   - 方式三：导入配置文件

4. **启用代理**
   - 打开全局开关
   - 打开需要使用的模块开关
   - 打开需要使用的接口开关

5. **开始使用**
   - 在目标页面中访问接口
   - 请求自动被代理到 Mock 服务器
   - 查看响应结果

### 5.2 日常使用流程

1. **打开配置页面**
   - 点击扩展图标打开配置页面

2. **切换模块**
   - 点击模块标签切换到目标模块

3. **管理接口**
   - 添加、编辑、删除接口
   - 调整接口配置
   - 测试接口

4. **控制开关**
   - 根据需要开启或关闭接口
   - 可以批量操作

5. **导出配置**（可选）
   - 定期导出配置作为备份
   - 或分享给团队成员

### 5.3 Apifox 同步流程

1. **打开同步弹窗**
   - 点击"同步 Apifox"按钮

2. **配置 Apifox 地址**
   - 输入 Apifox 文档地址
   - 系统自动验证和解析

3. **选择同步范围**
   - 选择要同步的标签（可选）
   - 选择接口状态（可选）
   - 配置 Mock 地址前缀

4. **预览同步结果**
   - 查看将要同步的接口数量
   - 查看接口摘要信息
   - 检查是否有冲突

5. **执行同步**
   - 确认同步
   - 系统自动转换和保存配置
   - 显示同步结果

6. **使用同步的接口**
   - 切换到同步的模块
   - 根据需要开启接口
   - 开始使用

### 5.4 权限点生成流程

1. **配置接口**
   - 完成接口的基本配置
   - 确保接口名称和地址正确

2. **生成权限点**
   - 选择要生成权限点的接口
   - 点击"复制权限点"按钮
   - 输入父级权限点 Key

3. **复制权限点数据**
   - 系统自动生成权限点数据
   - 自动复制到剪贴板
   - 显示成功提示

4. **使用权限点数据**
   - 粘贴到后端权限系统
   - 或保存到文件中
   - 提供给后端开发使用

---

## 六、非功能需求

### 6.1 性能需求

**响应速度**

- 操作响应时间 < 100ms
- 页面加载时间 < 1s
- 搜索和筛选实时生效

**资源占用**

- 扩展占用内存合理
- 不影响浏览器性能
- 规则更新高效

### 6.2 兼容性需求

**浏览器支持**

- Chrome 浏览器（主要支持）
- Edge 浏览器（Chromium 内核）
- 其他基于 Chromium 的浏览器

**平台支持**

- Windows 操作系统
- macOS 操作系统
- Linux 操作系统

### 6.3 安全需求

**数据安全**

- 所有配置数据存储在本地
- 不向第三方服务器发送用户数据
- 支持用户导出和删除数据

**权限最小化**

- 仅申请必要的权限
- 不使用已废弃的 API
- 遵循浏览器安全规范

### 6.4 可维护性需求

**代码质量**

- 代码结构清晰
- 注释完善
- 易于维护和扩展

**文档完善**

- 提供用户使用文档
- 提供开发文档
- 提供更新日志

---

## 七、未来规划

### 7.1 功能扩展

**完善快速联调功能**

- 完善自定义响应功能
- 支持更多响应场景
- 优化响应切换体验

**支持更多 Mock 数据生成规则**

- 支持随机数据生成
- 支持数据模板
- 支持动态数据生成

**支持接口分组和排序**

- 支持接口分组管理
- 支持自定义排序
- 支持拖拽排序

**支持接口历史记录**

- 记录接口配置历史
- 支持版本对比
- 支持回滚到历史版本

**支持接口性能监控**

- 记录接口响应时间
- 统计接口调用次数
- 提供性能分析报告

### 7.2 集成扩展

**支持更多 API 文档平台**

- 支持 Postman 导入
- 支持 Swagger 导入
- 支持其他主流 API 文档平台

**支持团队协作**

- 支持配置共享
- 支持团队配置同步
- 支持配置权限管理

**支持云端同步**

- 支持配置云端备份
- 支持多设备同步
- 支持配置版本管理

### 7.3 界面优化

**支持暗色主题**

- 提供暗色主题选项
- 减少夜间使用时的视觉疲劳
- 符合用户偏好

**支持自定义主题**

- 允许用户自定义颜色
- 提供主题模板
- 支持主题导入导出

**优化移动端体验**

- 优化移动端界面布局
- 支持移动端基本操作
- 提供移动端专用功能

---

## 八、附录

### 8.1 术语表

| 术语   | 说明                     |
| ------ | ------------------------ |
| API    | 应用程序编程接口         |
| Mock   | 模拟数据，用于开发和测试 |
| 代理   | 将请求转发到其他地址     |
| 模块   | 一组相关接口的集合       |
| 权限点 | 用于权限系统的接口标识   |
| Tag    | 标签，用于接口分类       |
| Apifox | API 文档管理平台         |

### 8.2 常见问题

**Q: 为什么有些接口代理不生效？**
A: 请检查以下几点：

1. 全局开关是否已开启
2. 模块开关是否已开启
3. 接口开关是否已开启
4. 接口地址匹配规则是否正确

**Q: 如何备份配置？**
A: 使用导出功能，将配置导出为 JSON 文件保存。

**Q: 如何在不同设备间同步配置？**
A: 在一台设备上导出配置，在另一台设备上导入配置。

**Q: 如何从 Apifox 同步接口？**
A: 点击"同步 Apifox"按钮，输入 Apifox 文档地址，选择要同步的标签，点击确认即可。

**Q: 权限点数据如何使用？**
A: 生成权限点数据后，复制给后端开发，后端开发将其导入到权限系统中。

---

**文档版本**：v2.0
**最后更新**：2025年
**文档类型**：产品需求文档（PRD）
**维护者**：产品团队
